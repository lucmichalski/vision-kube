<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mockito="http://www.mockito.org/spring/mockito"
       xmlns:task="http://www.springframework.org/schema/task"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
						http://www.mockito.org/spring/mockito classpath:spring/mockito.xsd
						http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
						http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.2.xsd                     
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd">

    <context:annotation-config/>
    <mockito:mock id="solrDao" class="eu.europeana.cloud.service.dls.solr.SolrDAO"/>
    <mockito:mock id="customerWrapper"
                  class="eu.europeana.cloud.service.dls.kafka.CustomerWrapper" />
    <mockito:mock id="messageListener" class="eu.europeana.cloud.service.dls.kafka.KafkaMessageListener" />
   
    
    <!--    Create listeners to MessageDispatcher-->
    <bean id="allDataSetAssignmentsRemovedMessageProcessor" class="eu.europeana.cloud.service.dls.listeners.AllDataSetAssignmentsRemovedMessageProcessor"/>
    <bean id="allRecordRepresentationsRemovedMessageProcessor" class="eu.europeana.cloud.service.dls.listeners.AllRecordRepresentationsRemovedMessageProcessor"/>
    <bean id="assignmentAddedMessageProcessor" class="eu.europeana.cloud.service.dls.listeners.AssignmentAddedMessageProcessor"/>
    <bean id="assignmentRemovedMessageProcessor" class="eu.europeana.cloud.service.dls.listeners.AssignmentRemovedMessageProcessor"/>
    <bean id="representationRemovedMessageProcessor" class="eu.europeana.cloud.service.dls.listeners.RepresentationRemovedMessageProcessor"/>
    <bean id="representationVersionAddedMessageProcessor" class="eu.europeana.cloud.service.dls.listeners.RepresentationVersionAddedMessageProcessor"/>
    <bean id="representationVersionAddedPersistentMessageProcessor" class="eu.europeana.cloud.service.dls.listeners.RepresentationVersionAddedPersistentMessageProcessor"/>
    <bean id="representationVersionRemovedMessageProcessor" class="eu.europeana.cloud.service.dls.listeners.RepresentationVersionRemovedMessageProcessor"/>
    <!--    Create message type classes to MessageDispatcher-->
    <bean id="RemoveAssignmentsFromDataSetMessageClass" factory-method="forName" class="java.lang.Class">
        <constructor-arg value="eu.europeana.cloud.service.mcs.messages.RemoveAssignmentsFromDataSetMessage" />
    </bean>
    <bean id="RemoveRecordRepresentationsMessageClass" factory-method="forName" class="java.lang.Class">
        <constructor-arg value="eu.europeana.cloud.service.mcs.messages.RemoveRecordRepresentationsMessage" />
    </bean>  
    <bean id="AddAssignmentMessageClass" factory-method="forName" class="java.lang.Class">
        <constructor-arg value="eu.europeana.cloud.service.mcs.messages.AddAssignmentMessage" />
    </bean>  
    <bean id="RemoveAssignmentMessageClass" factory-method="forName" class="java.lang.Class">
        <constructor-arg value="eu.europeana.cloud.service.mcs.messages.RemoveAssignmentMessage" />
    </bean>  
    <bean id="RemoveRepresentationMessageClass" factory-method="forName" class="java.lang.Class">
        <constructor-arg value="eu.europeana.cloud.service.mcs.messages.RemoveRepresentationMessage" />
    </bean>  
    <bean id="InsertRepresentationMessageClass" factory-method="forName" class="java.lang.Class">
        <constructor-arg value="eu.europeana.cloud.service.mcs.messages.InsertRepresentationMessage" />
    </bean>  
    <bean id="InsertRepresentationPersistentMessageClass" factory-method="forName" class="java.lang.Class">
        <constructor-arg value="eu.europeana.cloud.service.mcs.messages.InsertRepresentationPersistentMessage" />
    </bean>  
    <bean id="RemoveRepresentationVersionMessageClass" factory-method="forName" class="java.lang.Class">
        <constructor-arg value="eu.europeana.cloud.service.mcs.messages.RemoveRepresentationVersionMessage" />
    </bean>
    
    <bean id="messageDispatcher" class="eu.europeana.cloud.service.dls.kafka.MessageDispatcher" >
        <property name="listenersMap">
            <map>
                <entry key-ref="RemoveAssignmentsFromDataSetMessageClass" value-ref="allDataSetAssignmentsRemovedMessageProcessor" />
                <entry key-ref="RemoveRecordRepresentationsMessageClass" value-ref="allRecordRepresentationsRemovedMessageProcessor" />
                <entry key-ref="AddAssignmentMessageClass" value-ref="assignmentAddedMessageProcessor" />
                <entry key-ref="RemoveAssignmentMessageClass" value-ref="assignmentRemovedMessageProcessor" />
                <entry key-ref="RemoveRepresentationMessageClass" value-ref="representationRemovedMessageProcessor" />
                <entry key-ref="InsertRepresentationMessageClass" value-ref="representationVersionAddedMessageProcessor" />
                <entry key-ref="InsertRepresentationPersistentMessageClass" value-ref="representationVersionAddedPersistentMessageProcessor" />
                <entry key-ref="RemoveRepresentationVersionMessageClass" value-ref="representationVersionRemovedMessageProcessor" />   
            </map>
        </property>
    </bean>

    <mockito:spy beanName="messageDispatcher" />
</beans>
